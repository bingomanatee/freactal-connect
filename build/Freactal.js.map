{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4b5ec5afc9c4187fc5d1","webpack:///external \"react\"","webpack:///./src/components/Freactal/FreactalContext/index.jsx","webpack:///./src/components/Freactal/injectState/index.jsx","webpack:///./src/components/Freactal/Combine/index.jsx","webpack:///./src/components/Freactal/provideEngine/index.jsx","webpack:///./src/components/Freactal/provideState/index.jsx"],"names":["React","constructor","passThrough","customProps","effects","engine","actions","state","componentDidMount","console","componentWillUnmount","stopSub","render","children","props","InnerView","StatefulView","wrapper","injectToTarget","Array"],"mappings":"AAAA,eACA,iDADA,CAEA,kBAFA,CAGA,qCAHA,CAIA,uBAJA,CAKA,wBALA,CAMA,oBANA,CAQA,cACC,CATD,EASC,kCATD,CASC,WACD,M,aCNA,cAGA,QACA,oBAGA,YACA,GADA,CAEA,IAFA,CAGA,UAHA,EAaA,MANA,mCAMA,CAHA,MAGA,UACA,CAxBA,SA4DA,MAhCA,MAgCA,CA7BA,KA6BA,CA1BA,oBACA,QADA,EAEA,2BACA,eADA,CAEA,aAFA,CAGA,KAHA,EAMA,CAkBA,CAfA,gBACA,sBACA,WAA2B,mBAA4B,CADvD,CAEA,WAAiC,QAAe,CAFhD,CAIA,MADA,aACA,EACA,CASA,CANA,kBAAsD,gDAA+D,CAMrH,CAHA,QAGA,S,eC7DA,0B,cAAA,oD,oHCEeA,oBAAf,IAAeA,C,kKCwFf,EArFA,aAAqC,CACnC,2BAAuC,CACrCC,cAA2B,CACzB,QADyB,4BAKvB,UALuB,GAKV,kBAGXC,YAAaC,MAHF,CALU,GAWT,kBAGZD,oBACYE,QAASC,EADrBH,QACqCI,QAASD,EAD9CH,QAC8DK,MAAOF,EAAOE,KAD5EL,EAHY,CAXS,CAmBT,kBAGZA,0CACsCK,QADtCL,EAHY,CAQjB,CAEDM,mBAAoB,CACd,WAAJ,MADkB,GAEhB,yBAA2B,4BAA4B,CAAC,CAAD,OAAC,CAAD,GAAe,CACpE,cAAc,CACZN,iBACK,WADLA,OAEEI,QAAS,kBAFXJ,QAGEK,OAHFL,EADY,CAAd,CADyB,EAQxB,KAAS,CACVO,uBATyB,EAUxB,IAAM,CACP,cAXF,CAA2B,CAFX,CAgBnB,CAEDC,sBAAuB,CACrB,cACD,CAGDC,SAAU,CACJ,KAAJ,mBADQ,GAEN,sCAFM,CAGN,MAAO,MAAP,mBAHM,CAKT,CAEDC,QAAS,CACP,MAAO,2BAAU,WAAV,YAAmC,WAAWC,QAA9C,CACR,CA9DoC,CAiEvC,+BAAyC,CACvCD,QAAS,CACP,MACE,yCAEIP,KACE,2BAAgB,MAAO,KAAvB,gBACG,WAAWQ,QADd,CAHN,CAUH,CAbsC,CAgBzC,QACD,C,CCpFc,+BAAoC,CACjDZ,cAAmB,CACjB,QADiB,CAEjB,WAAa,CAAEI,OAAQ,yBAAuBS,EAA9C,OAAuB,CAAV,CACd,CAEDF,QAAS,CACP,MACE,qCAA0B,MAAO,WAAjC,QACG,WAAWC,QADd,CAIH,CAZgD,C,GCkEnD,GAzDA,eAAuD,CACrD,aAAuB,CACrB,QADqB,IAGnBE,MAHmB,EAOrB,2BAAqC,CAEnCd,cAAmB,CACjB,QADiB,CAEjB,WAAa,CAAb,QAAa,CACd,CACDW,QAAS,OACH,MAAJ,OADO,CAGH,2BAAS,QAAS,CAAC,KAAD,QAAe,WAAjC,MAAkB,CAAlB,EACE,0BAAe,KAAf,MADF,CAHG,CASL,wCAEI,OAGM,2BAAS,QAAS,GAAgB,WAAlC,MAAkB,CAAlB,EACE,0BAAe,KAAf,MADF,CAHN,CAUI,oCAA0B,MAAO,WAAjC,QACE,0BAAe,KAAf,MADF,CAZR,CAoBH,CAnCkC,CAwCrC,MA/CqB,2EA+CrB,CAFAI,eAEA,EACD,CAjDoD,SAoD5CC,EAAQC,EAAf,IAAeA,EAARD,CApD4C,EAuDtD,C,CC/CD,EAVA,eAA2D,CACzD,MAMA,SALIE,MAAJ,OAAIA,GAKJ,CAJW,kBAATd,IAAS,CAIX,CAFW,GAATA,cAAS,GAEX,SACD,C,qTPnBD,C","file":"Freactal.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Freactal\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Freactal\"] = factory();\n\telse\n\t\troot[\"Freactal\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4b5ec5afc9c4187fc5d1","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0 1 2 3","import React from 'react'; // eslint-disable-line import/no-extraneous-dependencies\n\nexport default React.createContext(null);\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/FreactalContext/index.jsx","/* eslint-disable react/no-multi-comp */\nimport { Component, PureComponent } from 'react'; // eslint-disable-line import/no-extraneous-dependencies\n\nimport FreactalContext from '../FreactalContext';\n\nfunction injector(View, customProps) {\n  class EngineInjector extends Component {\n    constructor(originalProps) {\n      super(originalProps);\n      const { props, engine } = originalProps;\n\n      if (customProps) {\n        this.state = {\n          engine,\n          props,\n          passThrough: customProps(props, engine),\n        };\n      } else if (engine) {\n        this.state = ({\n          engine,\n          props,\n          passThrough: {\n            ...props, effects: engine.actions, actions: engine.actions, state: engine.state,\n          },\n        });\n      } else {\n        this.state = ({\n          engine,\n          props,\n          passThrough: {\n            ...props, effects: {}, actions: {}, state: {},\n          },\n        });\n      }\n    }\n\n    componentDidMount() {\n      if (this.state.engine) {\n        this._engineSubscription = this.state.engine.subscribe(({ state }) => {\n          this.setState({\n            passThrough: {\n              ...this.state.props,\n              actions: this.state.engine.actions,\n              state,\n            },\n          });\n        }, (err) => {\n          console.log('error:', err);\n        }, () => {\n          this.stopSub();\n        });\n      }\n    }\n\n    componentWillUnmount() {\n      this.stopSub();\n    }\n\n\n    stopSub() {\n      if (this._engineSubscription) {\n        this._engineSubscription.unsubscribe();\n        delete this._engineSubscription;\n      }\n    }\n\n    render() {\n      return <View {...this.state.passThrough}>{this.props.children}</View>;\n    }\n  }\n\n  class InjectedView extends PureComponent {\n    render() {\n      return (\n        <FreactalContext.Consumer>\n          {\n            engine => (\n              <EngineInjector props={this.props} engine={engine}>\n                {this.props.children}\n              </EngineInjector>\n          )\n          }\n        </FreactalContext.Consumer>\n      );\n    }\n  }\n\n  return InjectedView;\n}\n\nexport default injector;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/injectState/index.jsx","import { PureComponent } from 'react';\nimport { StoreEngineReducer } from '@wonderlandlabs/freactal-engine';\nimport FreactalContext from '../FreactalContext';\n\nexport default class Combine extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { engine: new StoreEngineReducer(props.engines) };\n  }\n\n  render() {\n    return (\n      <FreactalContext.Provider value={this.state.engine}>\n        {this.props.children}\n      </FreactalContext.Provider>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/Combine/index.jsx","import { Component } from 'react'; // eslint-disable-line import/no-extraneous-dependencies\nimport FreactalContext from '../FreactalContext';\nimport injectState from '../injectState';\nimport Combine from '../Combine';\n\n/**\n * note - the Target property doesn't seem to work - its a webpack/babel thing.\n *\n * @param engine\n * @param Target\n * @param injectToTarget\n * @returns {Component}\n */\nfunction provideEngine(engine, Target, injectToTarget) {\n  function wrapper(View) {\n    let InnerView = View;\n    if (injectToTarget) {\n      InnerView = injectState(View);\n    }\n\n\n    class StatefulView extends Component {\n      static contextType = FreactalContext;\n      constructor(props) {\n        super(props);\n        this.state = { engine };\n      }\n      render() {\n        if (this.context) {\n          return (\n            <Combine engines={[this.context, this.state.engine]}>\n              <InnerView {...this.props} />\n            </Combine>\n          );\n        }\n        return (\n          <FreactalContext.Consumer>\n            {\n              (previousState) => {\n                if (previousState) {\n                  return (\n                    <Combine engines={[previousState, this.state.engine]}>\n                      <InnerView {...this.props} />\n                    </Combine>\n                  );\n                }\n\n                return (\n                  <FreactalContext.Provider value={this.state.engine}>\n                    <InnerView {...this.props} />\n                  </FreactalContext.Provider>\n                );\n              }\n            }\n          </FreactalContext.Consumer>\n        );\n      }\n    }\n\n    StatefulView.contextType = FreactalContext;\n\n    return StatefulView;\n  }\n\n  if (Target) {\n    return wrapper(injectToTarget ? injectState(Target) : Target);\n  }\n  return wrapper;\n}\n\nexport default provideEngine;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/provideEngine/index.jsx","import { StoreEngine } from '@wonderlandlabs/freactal-engine';\nimport provideEngine from './../provideEngine';\n\n/**\n * Note - the Target/inject thing doesn't work - its a Babel/Webpack thing\n *\n * @param engineProps\n * @param Target\n * @param injectToTarget\n * @returns {Component}\n */\nfunction provideState(engineProps, Target, injectToTarget) {\n  let engine;\n  if (Array.isArray(engineProps)) {\n    engine = new StoreEngine(...engineProps);\n  } else {\n    engine = new StoreEngine(engineProps);\n  }\n  return provideEngine(engine, Target, injectToTarget);\n}\n\nexport default provideState;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/provideState/index.jsx"],"sourceRoot":""}