{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 07213eaf3c7128ca4a3b","webpack:///external \"react\"","webpack:///./src/components/Freactal/FreactalContext/index.jsx","webpack:///./src/components/Freactal/injectState/index.jsx","webpack:///./src/components/Freactal/provideEngine/index.jsx","webpack:///./src/components/Freactal/provideState/index.jsx","webpack:///./src/components/Freactal/index.jsx"],"names":["React","propList","customProps","actions","effects","state","engineState","engine","updateState","self","engineError","console","unsubscribe","render","children","wrapper","InnerView","constructor","providedEngine","injectToTarget","Array"],"mappings":"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","file":"Freactal.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Freactal\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Freactal\"] = factory();\n\telse\n\t\troot[\"Freactal\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 07213eaf3c7128ca4a3b","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0 1 2 3","import React from 'react'; // eslint-disable-line import/no-extraneous-dependencies\n\nexport default React.createContext(null);\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/FreactalContext/index.jsx","import { Component } from 'react'; // eslint-disable-line import/no-extraneous-dependencies\n\nimport FreactalContext from '../FreactalContext';\n\nfunction injector(View, customProps) {\n  class InjectedView extends Component {\n    get engineState() {\n      return this.engine ? this.engine.state : {};\n    }\n\n    get engineActions() {\n      return this.engine ? this.engine.actions : {};\n    }\n\n    get engine() {\n      return this._engine;\n    }\n\n    get updatedProps() {\n      const propList = { ...this.props };\n      delete propList.children;\n\n      if (customProps) return customProps(propList, this.engine);\n\n      return Object.assign({}, propList, {\n        actions: this.engineActions,\n        effects: this.engineActions,\n        state: this.engineState,\n      });\n    }\n\n    set engine(engine) {\n      if (engine === this._engine) return;\n      if (this._engineSubscriber) {\n        this._engineSubscriber.unsubscribe();\n      }\n\n      if (engine) {\n        this._engineSubscriber = engine.subscribe(this.updateState(), this.engineError(), this.unsubscribe());\n      }\n\n      this._engine = engine;\n    }\n\n    updateState() {\n      const self = this;\n      return () => self.forceUpdate();\n    }\n\n    engineError(err) {\n      const self = this;\n      return () => {\n        console.log('freactal state error:', err, self.engine);\n      };\n    }\n\n    unsubscribe() {\n      const self = this;\n      return () => {\n        if (self._engineSubscriber) {\n          self._engineSubscriber.unsubscribe();\n          self._engineSubscriber = null;\n        }\n      };\n    }\n\n    render() {\n      return (\n        <FreactalContext.Consumer>\n          {(engine) => {\n            this.engine = engine;\n            return <View {...this.updatedProps}>{ this.props.children}</View>;\n          }}\n        </FreactalContext.Consumer>\n      );\n    }\n  }\n\n  return InjectedView;\n}\n\nexport default injector;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/injectState/index.jsx","import { Component } from 'react'; // eslint-disable-line import/no-extraneous-dependencies\nimport { StoreEngineReducer } from '@wonderlandlabs/freactal-engine';\nimport FreactalContext from '../FreactalContext';\nimport injectState from '../injectState';\n\nfunction provideEngine(engine, Target, injectToTarget) {\n  const wrapper = function wrapper(View) {\n    let InnerView = View;\n    if (injectToTarget) {\n      InnerView = injectState(View);\n    }\n\n    class StatefulView extends Component {\n      constructor(props) {\n        super(props);\n        this.state = { engine };\n      }\n\n      render() {\n        let providedEngine = this.state.engine;\n        return (\n          <FreactalContext.Consumer>\n            {\n              (previousState) => {\n              if (previousState) {\n                providedEngine = new StoreEngineReducer([previousState, this.state.engine]);\n              }\n\n              return (\n                <FreactalContext.Provider value={providedEngine}>\n                  <InnerView {...this.props} />\n                </FreactalContext.Provider>\n              );\n            }\n            }\n          </FreactalContext.Consumer>\n        );\n      }\n    }\n\n    return StatefulView;\n  };\n\n  if (Target) return wrapper(injectToTarget ? injectState(Target) : Target);\n  return wrapper;\n}\n\nexport default provideEngine;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/provideEngine/index.jsx","import { Component } from 'react'; // eslint-disable-line import/no-extraneous-dependencies\nimport { StoreEngineReducer, StoreEngine } from '@wonderlandlabs/freactal-engine';\nimport FreactalContext from '../FreactalContext';\nimport injectState from './../injectState';\n\nfunction provideState(engineProps, Target, injectToTarget) {\n  const wrapper = function wrapper(View) {\n    let InnerView = View;\n    if (injectToTarget) {\n      InnerView = injectState(View);\n    }\n    class StatefulView extends Component {\n      constructor(props) {\n        super(props);\n        if (Array.isArray(engineProps)) {\n          this.state = { engine: new StoreEngine(...engineProps) };\n        } else {\n          this.state = { engine: new StoreEngine(engineProps) };\n        }\n      }\n\n      render() {\n        let providedEngine = this.state.engine;\n        return (\n          <FreactalContext.Consumer>\n            {\n              (previousState) => {\n              if (previousState) {\n                providedEngine = new StoreEngineReducer([previousState, this.state.engine]);\n              }\n\n              return (\n                <FreactalContext.Provider value={providedEngine}>\n                  <InnerView {...this.props} />\n                </FreactalContext.Provider>\n              );\n            }\n            }\n          </FreactalContext.Consumer>\n        );\n      }\n    }\n\n    return StatefulView;\n  };\n\n  return wrapper;\n}\n\nexport default provideState;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/provideState/index.jsx","import FreactalContext from './FreactalContext';\nimport injectState from './injectState';\nimport provideEngine from './provideEngine';\nimport provideState from './provideState';\n\nexport {\n  FreactalContext,\n  injectState,\n  provideState,\n  provideEngine,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Freactal/index.jsx"],"sourceRoot":""}